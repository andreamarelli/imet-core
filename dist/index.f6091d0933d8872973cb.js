(()=>{var e={4484:()=>{},9128:()=>{},8150:()=>{},6833:()=>{},817:()=>{},6946:()=>{},1633:()=>{},2848:()=>{},5081:()=>{},7044:()=>{},8547:()=>{},2978:(e,t,s)=>{window.ImetCore={},window.ImetCore.Mixins={status:s(4935),load_from_previous:s(2324),key_elements:s(9544).Z},Vue.component("dopa_chart_bar",s(8888).Z),Vue.component("dopa_indicators_table",s(9553).Z),Vue.component("dopa_radar",s(6892).Z),window.ImetCore.Dopa={chart_bar:s(8888).Z,chart_doughnut:s(4781).Z},Vue.component("imet_charts",s(7869).Z),Vue.component("imet_encoders_responsibles",s(1022).Z),Vue.component("imet_progress_bar",s(760).Z),Vue.component("imet_radar",s(4278).Z),Vue.component("imet_bar_chart",s(5883).Z),Vue.component("multiple-files-upload",s(8406).Z),Vue.component("selector-wdpa",s(2266).Z),Vue.component("selector-wdpa_multiple",s(3640).Z),s(4142)},9544:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={methods:{key_element_label:function(e){if(this.Locale=window.Locale,null!==e){if(this.isTaxonomy(e))return this.getScientificName(e);if(this.isHabitat(e))return this.getHabitatLabel(e)}return e},isTaxonomy:function(e){return 5===(e.match(/\|/g)||[]).length},getScientificName:function(e){let t=e.split("|");return t[4]+" "+t[5]},isHabitat:function(e){return!this.Locale.getLabel("imet-core::v2_lists.Habitats."+e).includes("::v2_lists")},getHabitatLabel:function(e){return this.Locale.getLabel("imet-core::v2_lists.Habitats."+e)}}}},2324:e=>{e.exports={data:()=>({previous_url:null}),props:{current_year:{type:String,default:null},current_pa:{type:String,default:null},available_years:{type:[Array,Object],default:()=>null},prev_year_selection:{type:String,default:null},show_language:{type:Boolean,default:!0},retrieving_years:{type:Boolean,default:!1}},watch:{prev_year_selection(e){this.show_language=null===e||"no_import"===e;let t=this.records[0];t.prev_year_selection=e,this.$set(this.records,0,t)},records:{handler:function(){this.recordChangedCallback()},deep:!0}},methods:{async recordChangedCallback(){if(this.current_pa!==this.records[0].wdpa_id&&this.current_year!==this.records[0].Year&&(this.prev_year_selection=null,this.available_years=null),!([null,""].includes(this.records[0].wdpa_id)||[null,""].includes(this.records[0].Year)||this.current_pa===this.records[0].wdpa_id&&this.current_year===this.records[0].Year))try{const e=await this.retrievePreviousYears();this.retrieving_years=!1,Object.values(e).length>0?this.parseAvailableYears(e):this.available_years=null}catch(e){this.retrieving_years=!1,this.available_years=null}[null,""].includes(this.records[0].Year)||[null,""].includes(this.records[0].wdpa_id)||!("no_import"===this.prev_year_selection&&null!==this.records[0].language||"no_import"!==this.prev_year_selection&&null!==this.prev_year_selection||null===this.available_years&&null!==this.records[0].language)?this.status="init":this.status="idle",this.status="init"!==this.status&&"changed"!==this.status?"changed":this.status,this.current_pa=this.records[0].wdpa_id,this.current_year=this.records[0].Year},resetModuleCallback(){this.reset_status="init"},async retrievePreviousYears(){let e=this;return e.available_years=null,e.retrieving_years=!0,fetch(this.previous_url,{method:"post",headers:{"Content-Type":"application/json","X-CSRF-Token":window.Laravel.csrfToken},body:JSON.stringify({year:e.records[0].Year,wdpa_id:e.records[0].wdpa_id})}).then((e=>e.json()))},parseAvailableYears(e){let t=this;this.available_years=e,this.available_years.no_import="No";let s=Object.values(this.available_years),a=this.foundDuplicates(s);Object.keys(this.available_years).forEach((function(e){a.includes(t.available_years[e])&&(t.available_years[e]=t.available_years[e]+" (IMET #"+e+")")}))},foundDuplicates(e){let t=e.slice().sort(),s=[];for(let e=0;e<t.length-1;e++)t[e+1]===t[e]&&s.push(t[e]);return s}}}},4935:e=>{const t="init",s="idle";e.exports={data:()=>({records_backup:null,status:null,warning_on_save:null}),created:function(){this.status=t,this.records_backup=this.__no_reactive_copy(this.records)},mounted:function(){this.set_status(s)},watch:{records:{handler:function(){this.status!==t&&(this.status="changed")},deep:!0}},methods:{__no_reactive_copy:function(e){return JSON.parse(JSON.stringify(e))},set_status:function(e){let t=this;Vue.nextTick((function(){t.status=e}))},resetModule(){this.records=this.__no_reactive_copy(this.records_backup),this.resetData(),this.set_status(s)},saveModule(){this.set_status("saving"),this.saveData(),this.set_status("saved")},resetData(){},beforeShowBar:function(e){$(e).css("display","none")},showBar:function(e,t){$(e).slideDown(400,(function(){$(this).css("display","block"),t()}))},hideBar:function(e,t){$(e).slideUp(400,(function(){$(this).css("display","none"),t()}))}}}},4142:(e,t,s)=>{Vue.component("action-button",s(8272).Z),Vue.component("action-button-cookie",s(7316).Z),Vue.component("label-cloud",s(7743).Z)},8406:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=function(){var e=this,t=e._self._c;return t("div",[t("vue-dropzone",{ref:"myVueDropzone",attrs:{id:"dropzone",options:e.dropZoneOptions,useCustomSlot:!0},on:{"vdropzone-error":e.uploadError,"vdropzone-processing":e.processing,"vdropzone-success":e.uploadedSuccessfully,"vdropzone-file-added":e.fileAdded}},[t("div",{staticClass:"dropzone-custom-content"},[t("h3",{staticClass:"dropzone-custom-title"},[e._v(e._s(e.Locale.getLabel("modular-forms::common.upload.multiple_files_description")))])])]),e._v(" "),t("a",{directives:[{name:"show",rawName:"v-show",value:e.files_added>0&&e.files_added===e.files_uploaded,expression:"files_added>0 && files_added===files_uploaded"}],staticClass:"btn-nav",attrs:{href:e.backUrl}},[e._v("\n      "+e._s(e.Locale.getLabel("modular-forms::common.go_back"))+"\n    ")])],1)};a._withStripped=!0;const i={components:{vueDropzone:window.ImetCoreVendor.VueDropzone},props:{uploadUrl:{type:String,default:null},backUrl:{type:String,default:null}},data(){const e=window.Locale;return{Locale:e,modalIsOpen:!1,dropZoneOptions:{url:this.uploadUrl,previewTemplate:this.template(),params:{_token:window.Laravel.csrfToken},addRemoveLinks:!0,clickable:!0,maxFiles:20,maxFilesize:150,timeout:1e5,acceptedFiles:".json,.zip",autoProcessQueue:!0,dictDefaultMessage:e.getLabel("modular-forms::common.upload.dict_default_message"),dictFallbackMessage:e.getLabel("modular-forms::common.upload.dict_fallback_message"),dictFallbackText:e.getLabel("modular-forms::common.upload.dict_fallback_text"),dictFileTooBig:e.getLabel("modular-forms::common.upload.dict_file_too_big"),dictInvalidFileType:e.getLabel("modular-forms::common.upload.dict_invalid_file_type"),dictResponseError:e.getLabel("modular-forms::common.upload.dict_response_error"),dictCancelUpload:e.getLabel("modular-forms::common.upload.dict_cancel_upload"),dictUploadCanceled:e.getLabel("modular-forms::common.upload.dict_upload_canceled"),dictRemoveFile:e.getLabel("modular-forms::common.upload.dict_remove_file"),dictMaxFilesExceeded:e.getLabel("modular-forms::common.upload.dictMaxFilesExceeded")},formatTypes:["application/json","application/zip"],files_added:0,files_uploaded:0}},mounted:function(){window.confirm=function(){return!0}},methods:{template:function(){return'<div class="files text-sm" id="previews">\n                <div id="template" class="file-row">\n                    <div>\n                        <p class="name" data-dz-name></p>\n                    </div>\n                    <div>\n                        <p class="size" data-dz-size></p>\n                    </div>\n                    <div class="progress">\n                        <div class="progress-bar" id="total-progress" style="width:0;" data-dz-uploadprogress></div>\n                    </div>\n                </div>\n            </div>\n        '},progressBarConfiguration(e,t,s="blue",a="100%"){const i=e.previewTemplate.querySelector("#total-progress.progress-bar");i.innerHTML=t,i.style.backgroundColor=s,i.style.color="white",i.style.width=a},fileAdded(e){this.files_added++;const t=[...this.$refs.myVueDropzone.$el.children],s=t.pop();t.unshift(s),document.querySelector("#dropzone").append(...t)},uploadError(e,t){this.files_uploaded++;let s=Locale.getLabel("modular-forms::common.upload.upload_error");t.message?s+=t.message:this.formatTypes.includes(e.type)?s+=t:s=Locale.getLabel("modular-forms::common.upload.not_valid_format"),this.progressBarConfiguration(e,s,"red","100%")},processing(e){this.progressBarConfiguration(e,Locale.getLabel("modular-forms::common.upload.uploading"))},uploadedSuccessfully(e,t){this.files_uploaded++;let s=Locale.getLabel("modular-forms::common.upload.uploaded");if(t.length>1){let e=0;t.forEach((t=>{"error"!==t.status&&e++}));const a=t.length;s+=Locale.getLabel("modular-forms::common.upload.not_all_imported").replace("{{filesDidNotUploaded}}",e).replace("{{totalFiles}}",a)}this.progressBarConfiguration(e,s,"green")}}};s(2983);const o=(0,s(1900).Z)(i,a,[],!1,null,null,null).exports},2266:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=function(){var e=this,t=e._self._c;return t("selectorDialog",{attrs:{"parent-id":e.id,"search-url":e.searchUrl},scopedSlots:e._u([{key:"selector-anchor",fn:function(){return[t("div",{staticClass:"field-preview"},[e._v("\n            "+e._s(e.anchorLabel)+"\n        ")])]},proxy:!0},{key:"selector-api-search-result-filters",fn:function(){return[t("i",[e._v(e._s(e.Locale.getLabel("modular-forms::common.filter_results"))+": ")]),e._v("  \n        "+e._s(e.Locale.getLabel("imet-core::common.country"))+"\n        "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filterByCountry,expression:"filterByCountry"}],staticClass:"field-edit filterByCountry",on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.filterByCountry=t.target.multiple?s:s[0]},function(t){return e.filterList()}]}},[t("option",{attrs:{value:"null"}},[e._v(" - - ")]),e._v(" "),e._l(e.filteredCountries,(function(s,a){return t("option",{domProps:{value:a}},[e._v("\n                "+e._s(s)+"\n            ")])}))],2)]},proxy:!0},{key:"selector-api-search-result-header",fn:function(){return[t("th",[e._v(e._s(e.Locale.getLabel("imet-core::common.name")))]),e._v(" "),t("th",[e._v(e._s(e.Locale.getLabel("imet-core::common.protected_area.wdpa_id",1)))]),e._v(" "),t("th",[e._v(e._s(e.Locale.getLabel("imet-core::common.country")))]),e._v(" "),t("th",[e._v(e._s(e.Locale.getLabel("imet-core::common.protected_area.iucn_category")))])]},proxy:!0},{key:"selector-api-search-result-item",fn:function({item:s}){return[t("td",[t("span",{staticClass:"result_left"},[t("b",[e._v(e._s(s.name))])])]),e._v(" "),t("td",[null!==s.wdpa_id?t("a",{attrs:{target:"_blank",href:"https://www.protectedplanet.net/'+item.wdpa_id+'"}},[e._v(e._s(s.wdpa_id))]):e._e()]),e._v(" "),t("td",[e._v(e._s(s.country_name))]),e._v(" "),t("td",[e._v(e._s(s.iucn_category))])]}}])})};a._withStripped=!0;const i={mixins:[window.ModularForms.MixinsVue.values],props:{searchUrl:{type:String,default:null},dataCountries:{type:Object,default:()=>{}}},data:()=>({Locale:window.Locale,assetPath:window.ModularForms.assetPath,searchComponent:null,selectorComponent:null,inputValue:null,filterByCountry:null}),computed:{anchorLabel(){return null!==this.selectorComponent&&null!==this.selectorComponent.selectedValue?this.selectorComponent.selectedValue.name:null},filteredCountries(){let e=[];this.searchComponent.showList.forEach((function(t){t.country.includes(";")?t.country.split(";").forEach((t=>{e.includes(t)||e.push(t)})):e.includes(t.country)||e.push(t.country)}));let t={};for(const[s,a]of Object.entries(this.dataCountries))e.includes(s)&&(t[s]=a);return t}},mounted(){this.selectorComponent=this.$children[0],this.searchComponent=this.$children[0].$children[0].$children[0]},methods:{afterSearch(e){this.filterByCountry=null},filterList(){let e={country:this.filterByCountry};this.searchComponent.filterShowList(e)},getSelectedValue(e){return this.selectorComponent.selectedValue.wdpa_id}}};s(567);const o=(0,s(1900).Z)(i,a,[],!1,null,"ed5f2fe0",null).exports},3640:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=function(){var e=this,t=e._self._c;return t("selectorDialog",{attrs:{"parent-id":e.id,"search-url":e.searchUrl},scopedSlots:e._u([{key:"selector-anchor",fn:function(){return[t("span",{staticClass:"field-preview"},e._l(e.inputValuesObj,(function(s){return t("span",{staticClass:"item dontOpenDialog"},[e._v("\n                "+e._s(s.label)+"\n                "),t("i",{staticClass:"fa fa-times removeItem",on:{click:function(t){return e.removeItem(s.id)}}})])})),0)]},proxy:!0},{key:"selector-api-search-result-header",fn:function(){return[t("th",[e._v(e._s(e.Locale.getLabel("imet-core::common.name")))]),e._v(" "),t("th",[e._v(e._s(e.Locale.getLabel("imet-core::common.protected_area.wdpa_id",1)))]),e._v(" "),t("th",[e._v(e._s(e.Locale.getLabel("imet-core::common.country")))]),e._v(" "),t("th",[e._v(e._s(e.Locale.getLabel("imet-core::common.protected_area.iucn_category")))])]},proxy:!0},{key:"selector-api-search-result-item",fn:function({item:s}){return[t("td",[t("span",{staticClass:"result_left"},[t("b",[e._v(e._s(s.name))])])]),e._v(" "),t("td",[null!==s.wdpa_id?t("a",{attrs:{target:"_blank",href:"https://www.protectedplanet.net/'+item.wdpa_id+'"}},[e._v(e._s(s.wdpa_id))]):e._e()]),e._v(" "),t("td",[e._v(e._s(s.country_name))]),e._v(" "),t("td",[e._v(e._s(s.iucn_category))])]}}])})};a._withStripped=!0;const i={mixins:[window.ModularForms.MixinsVue.values],props:{searchUrl:{type:String,default:null},labelsUrl:{type:String,default:""}},data:()=>({Locale:window.Locale,assetPath:window.ModularForms.assetPath,searchComponent:null,selectorComponent:null,inputValue:null,inputValuesObj:[],inputValuesString:""}),computed:{anchorLabel(){return null!==this.selectorComponent&&null!==this.selectorComponent.selectedValue?this.selectorComponent.selectedValue.name:null}},mounted(){this.getPaLabels(this.value),this.selectorComponent=this.$children[0],this.searchComponent=this.$children[0].$children[0].$children[0]},methods:{getPaLabels(e){let t=this;this.inputValuesObj=[],this.inputValuesString="",null!==e&&fetch(this.labelsUrl,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":window.Laravel.csrfToken},body:JSON.stringify({ids:e})}).then((e=>e.json())).then((function(e){Object.values(e).length>0&&Object.values(e).forEach((function(e){t.pushItem(e)}))})).catch((function(e){}))},getSelectedValue(e){return this.pushItem({id:e.wdpa_id,label:e.name}),this.inputValuesString},pushItem(e){null!==e&&""!==e&&(this.inputValuesObj.push({id:e.id,label:e.label}),""!==this.inputValuesString&&(this.inputValuesString+=","),this.inputValuesString+=e.id)},removeItem(e){let t=this.inputValuesString.replace(e,"").split(",").filter((function(e){return""!==e}));this.inputValuesString=t.toString();let s=[];this.inputValuesObj.forEach((function(t){t.id!==e&&s.push(t)})),this.inputValuesObj=s,this.selectorComponent.emitValue(this.inputValuesString)}}};s(5513);const o=(0,s(1900).Z)(i,a,[],!1,null,"3d142564",null).exports},7316:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=function(){var e=this;return(0,e._self._c)("button",{class:e.className,on:{click:function(t){return e.store_to_cookie_by_id_and_value("analysis")}}},[e._v("\n    "+e._s(e.label)+"\n")])};a._withStripped=!0;const i={name:"action-button-cookie.vue",mixins:[s(8272).Z],mounted:function(){this.$root.$on("store_cookie_and_value",((e,t)=>{this.store_to_cookie_by_id_and_value(e,t)}))},methods:{store_to_cookie_by_id_and_value(e,t=null){if(null===t&&(t=this.data),t.length>0){const s=window.ModularForms.Mixins.Cookies.getByName(e);if(s){const e=s.split("="),a=[...JSON.parse(e[1]),...JSON.parse(t)].reduce(((e,t)=>Array.isArray(e)?e.some((e=>e.id==t.id))?e:[...e,t]:e.id===t.id?[e]:[e,t]));window.ModularForms.Mixins.Cookies.create(e[0],JSON.stringify(a))}else window.ModularForms.Mixins.Cookies.create(e,t);this.$root.$emit("reset_checkboxes"),this.action()}},store_to_cookie:function(e){if(this.data.length>0){const t=window.ModularForms.Mixins.Cookies.getByName(e);if(t){const e=t.split("="),s=[...new Set([...e[1].split("|").map((e=>parseInt(e))),...this.data.map((e=>parseInt(e)))])];window.ModularForms.Mixins.Cookies.create(e[0],s.join("|"))}else window.ModularForms.Mixins.Cookies.create(e,this.data.join("|"));this.$root.$emit("reset_checkboxes"),this.action()}}}},o=(0,s(1900).Z)(i,a,[],!1,null,"ac797802",null).exports},8272:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=function(){var e=this;return(0,e._self._c)("button",{class:e.className,on:{click:e.action}},[e._v("\n  "+e._s(e.label)+"\n")])};a._withStripped=!0;const i={name:"action-button.vue",props:{event:{type:String,default:""},className:{type:String,default:"btn-nav float-left"},label:{type:String,default:"Submit"}},data:()=>({Locale:window.Locale,isEnabled:!1,data:[]}),mounted:function(){this.$root.$on("actionData",(e=>{this.eventFunction(e)}))},methods:{eventFunction:function(e){this.data=e,this.isEnabled=!0},resetValues:function(){this.isEnabled=!1,this.data=[]},action:function(){this.event&&(this.$root.$emit(this.event),this.resetValues())}}},o=(0,s(1900).Z)(i,a,[],!1,null,"57861aa8",null).exports},7743:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"vue-cloud flex flex-col"},[e.get_selections()?t("div",{staticClass:"flex flex-row justify-center gap-4"},[t("button",{staticClass:"btn-nav",on:{click:e.scaling_up}},[e._v("\n        "+e._s(this.labelScalingUp)+"\n      ")]),e._v(" "),t("actionButton",{attrs:{"class-name":"btn-nav red",click:e.clear_all,label:this.labelRemoveAll,event:"remove_values"}})],1):e._e(),e._v(" "),t("div",{staticClass:"m-4 flex flex-row justify-center gap-4"},e._l(e.selections,(function(s){return t("div",{key:s.id,on:{click:function(t){return e.remove_item(s)}}},[t("div",{staticClass:"p-2 bg-yellow-100 rounded border border-yellow-200"},[t("strong",[e._v(e._s(s.value))]),e._v(" "),e._m(0,!0)])])})),0)])};a._withStripped=!0;const i={name:"label-cloud.vue",components:{actionButton:s(8272).Z},props:{sourceOfData:{type:String,default:"cookie"},cookieName:{type:String,default:""},fieldId:{type:String,default:"id"},url:{type:String,default:""},labelScalingUp:{type:String,default:"Scaling up analysis"},labelRemoveAll:{type:String,default:"Remove all"}},data:()=>({Locale:window.Locale,_token:window.Laravel.csrfToken,modalIsOpen:!1,selections:[],value:[],ids:[]}),mounted:function(){this.values=window.list,this.parse_cookie_data(),this.$root.$on("update_cloud_tags",(e=>{this.is_cookie()&&this.parse_cookie_data()})),this.$root.$on("add_cloud_tags",(e=>{this.is_cookie()&&this.parse_cookie_data()})),this.$root.$on("remove_values",(()=>{this.is_cookie()&&this.clear_all()})),this.$root.$on("scaling_up",(()=>{this.ids=this.selections.map((e=>e[this.fieldId])).join(","),this.url.replace("__items__",this.ids),window.location.href=this.url}))},methods:{get_selections(){return!!this.selections?.length&&this.selections.length>1},scaling_up:function(){this.ids=this.selections.map((e=>e[this.fieldId])).sort(((e,t)=>parseInt(e)-parseInt(t))).join(","),this.ids=this.selections.map((e=>e[this.fieldId])).join(","),window.location.href=this.url.replace("__items__",this.ids)},get_values:function(){return this.get_raw_values()},get_raw_values(){if(this.is_cookie()){const e=window.ModularForms.Mixins.Cookies.getByName(this.cookieName);if(e){const t=e.split("=");return JSON.parse(t[1])}}return null},is_cookie:function(){return"cookie"===this.sourceOfData},initialize(){this.selections=this.get_values()},parse_cookie_data:function(){this.selections=this.get_values()},remove_item:function(e){this.selections=this.selections?.filter((t=>t[this.fieldId]!==e[this.fieldId])),this.update()},clear_all:async function(){this.selections=[],this.is_cookie()&&window.ModularForms.Mixins.Cookies.delete(this.cookieName)},update:function(){if(this.is_cookie()){const e=JSON.stringify([...this.selections]);window.ModularForms.Mixins.Cookies.update(this.cookieName,e)}}}};s(5479);const o=(0,s(1900).Z)(i,a,[function(){var e=this._self._c;return e("button",{attrs:{type:"button"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,"9175980e",null).exports},8888:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=function(){return this._self._c,this._m(0)};a._withStripped=!0;const i={props:{title:{type:String,default:null},indicators:{type:[Array],default:()=>null},api_data:{type:[Object],default:()=>null}},mounted(){null!==this.api_data&&this.draw_chart()},watch:{api_data(){this.draw_chart()}},methods:{default_options:()=>({tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{opacity:.5}}},grid:{left:"3%",right:"3%",bottom:"2%",top:"2%",containLabel:!0},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value"}]}),set_options(){let e=this.default_options();null!=this.title&&(e.title={text:this.title,left:"center"},e.grid.top="12%"),e.color=[],e.legend={data:[],top:"bottom"},e.grid.bottom="12%",this.indicators.forEach((function(t){e.color.push(t.color),e.legend.data.push(t.label)})),e.xAxis[0].data=[];let t=this.read_data();return e.series=[],this.indicators.forEach((function(s,a){e.series.push({type:"bar",data:t[a]})})),e},read_data(){let e=this,t=[];return this.indicators.forEach((function(s,a){t[a]=[],t[a].push(e.api_data[s.field])})),t},draw_chart(){if(null!==this.data){let e=this.set_options(),t=this.$el.getElementsByClassName("bar")[0];window.ImetCoreVendor.echarts.init(t).setOption(e)}}}};s(3341);const o=(0,s(1900).Z)(i,a,[function(){var e=this._self._c;return e("div",[e("div",{staticClass:"bar"})])}],!1,null,"73da51f2",null).exports},4781:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=function(){return this._self._c,this._m(0)};a._withStripped=!0;const i={props:{title:{type:String,default:null},indicators:{type:[Array],default:()=>null},api_data:{type:[Object],default:()=>null}},watch:{api_data(e){null!==e&&this.draw_chart()}},mounted(){null!==this.api_data&&this.draw_chart()},methods:{default_options:()=>({tooltip:{trigger:"item",formatter:"{b}<br />{c} ({d}%)"},series:[{type:"pie",radius:["60%","80%"],center:"50%",data:[],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}),set_options(){let e=this,t=this.default_options();return null!==this.title&&(t.title={textStyle:{fontSize:12},text:this.title,left:"center"},t.series[0].center=["50%","55%"]),t.series[0].data=[],t.color=[],this.indicators.forEach((function(s){t.color.push(s.color),t.series[0].data.push({value:e.api_data[s.field]?.toFixed(1)??0,name:s.label})})),t},draw_chart(){let e=this.set_options(),t=this.$el.getElementsByClassName("doughnut")[0];window.ImetCoreVendor.echarts.init(t).setOption(e)}}};s(640);const o=(0,s(1900).Z)(i,a,[function(){var e=this._self._c;return e("div",[e("div",{staticClass:"doughnut"})])}],!1,null,"013fe504",null).exports},6892:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"dopa_radar",style:"width:"+e.radar_width+"px; height: "+e.radar_height+"px;"})])};a._withStripped=!0;const i={name:"dopa_radar",props:{data:{type:[Number,String],default:null},radar_width:{type:Number,default:400},radar_height:{type:Number,default:350}},data:function(){return{labels:[],radar1:[],radar2:[]}},mounted(){let e=this.$el.querySelector("div.dopa_radar");null!=this.data&&"[]"!==this.data&&(this.chart=window.ImetCoreVendor.echarts.init(e),this.chart.setOption(this.radar_options()))},methods:{get_values(){let e=this;JSON.parse(this.data).forEach((function(t){e.labels.push({name:t.title.replace(" ","\n"),max:100}),e.radar1.push(t.country_avg),e.radar2.push(t.site_norm_value)}))},radar_options(){return this.get_values(),{tooltip:{trigger:"axis"},legend:{data:["Country Average","Protected Area"]},radar:{indicator:this.labels,radius:100,center:["50%","55%"],name:{textStyle:{color:"#111"}}},series:[{type:"radar",data:[{value:this.radar2,itemStyle:{color:"#8fbf4b"},areaStyle:{color:"#8fbf4b",opacity:.4},symbolSize:6,name:"Protected Area",tooltip:{trigger:"item"}},{value:this.radar1,itemStyle:{color:"#679b95"},areaStyle:{color:"#679b95",opacity:.4},symbolSize:6,name:"Country Average",tooltip:{trigger:"item"}}]}]}}}},o=(0,s(1900).Z)(i,a,[],!1,null,"348e5be1",null).exports},9553:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=function(){var e=this,t=e._self._c;return null!==e.api_data?t("div",{staticClass:"list-key-numbers horizontal"},[null!=e.title?t("div",{staticClass:"list-head"},[e._v("\n        "+e._s(e.title)+"\n    ")]):e._e(),e._v(" "),e._l(e.indicators,(function(s){return t("div",[t("div",{staticClass:"content"},[t("span",[e._v(e._s(s.label))]),e._v(" "),t("span",{staticClass:"number",style:{color:s.color}},[e._v(e._s(e._f("pretty_number")(e.getValue(s))))])])])}))],2):e._e()};a._withStripped=!0;const i={mixins:[window.ModularForms.FiltersVue.pretty_number],props:{title:{type:String,default:null},indicators:{type:[Array],default:()=>null},api_data:{type:[Object],default:()=>null}},methods:{getValue(e){let t=null;return e.hasOwnProperty("fields")?t=this.api_data[e.fields[e.fields.length-1]]:e.hasOwnProperty("field")&&(t=this.api_data[e.field]),parseFloat(t).toFixed(1)}}},o=(0,s(1900).Z)(i,a,[],!1,null,null,null).exports},5883:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=function(){var e=this;return(0,e._self._c)("div",{staticClass:"bar",style:"width:"+e.width+"; min-height: "+e.height+";"})};a._withStripped=!0;const i={name:"imet_bar_chart",props:{width:{type:String,default:"100%"},height:{type:String,default:"500px"},values:{type:[Array,Object],default:()=>{}},fields:{type:Array,default:()=>{}},rotate:{type:Number,default:0},title:{type:String,default:""},colors:{type:Array,default:null},zoom:{type:Boolean,default:!1},axis_dimensions_x:{type:Object,default:()=>{}},axis_dimensions_y:{type:Object,default:()=>{}},series_data:{type:Object,default:()=>{}},title_data:{type:String,default:""}},computed:{bar_options(){return{...this.get_colors(),legend:{show:!0,padding:[35,0,0,0]},title:{text:this.title,left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:this.field_name(),axisLabel:{rotate:this.rotate,interval:0},...this.axis_dimensions_x},yAxis:{type:"value",realtimeSort:!0,minInterval:1,...this.axis_dimensions_y},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},series:[{data:this.values,type:"bar",name:this.title_data,...this.series_data}],...this.has_zoom()}}},watch:{values:{deep:!0,handler(){this.draw_chart()}}},mounted(){this.draw_chart()},methods:{has_zoom:function(){return this.zoom?{dataZoom:[{show:!0,start:0,end:100}]}:{}},get_colors:function(){return null===this.colors?{}:{color:this.colors}},field_name:function(){return this.fields.map((e=>e))},draw_chart(){Object.keys(this.values).length>0&&(this.chart=window.ImetCoreVendor.echarts.init(this.$el),this.chart.setOption(this.bar_options))}}},o=(0,s(1900).Z)(i,a,[],!1,null,null,null).exports},7869:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[e.show_histogram?t("div",{staticClass:"imet_histogram"},e._l(e.values,(function(s){return t("div",{staticClass:"imet_histogram__row"},[t("div",{staticClass:"text-left imet_histogram__label"},[e._v(e._s(s.label))]),e._v(" "),t("div",{staticClass:"text-left imet_histogram__value"},[t("b",[null!==s.value?t("span",[e._v(e._s(s.value))]):e._e()])]),e._v(" "),t("div",{staticClass:"imet_histogram__progress_bar"},[t("progress_bar",{attrs:{value:s.value,color:s.color}})],1)])})),0):e._e(),e._v(" "),t("div",{staticClass:"imet_radar"},[t("imet_radar",{attrs:{values:e.radar_values,width:380,height:250}})],1)])};a._withStripped=!0;const i={components:{progress_bar:s(760).Z},props:{form_id:{type:[Number,String],default:null},version:{type:String,default:null},input_data:{type:[Object],default:()=>null},labels:{type:[Object],default:()=>null},show_histogram:{type:Boolean,default:!0},steps:{type:Array,default:()=>["context","planning","inputs","process","outputs","outcomes"]},colors:{type:Array,default:()=>["#FFFF00","#BFBFBF","#FFC000","#00B0F0","#92D050","#00B050"]}},data:function(){return{chart:null,api_data:null}},beforeMount(){null!==this.input_data&&(this.api_data=this.input_data)},mounted(){let e=this;null===this.api_data&&this.retrieve_api(),window.vueBus.$on("refresh_assessment",(function(){e.retrieve_api()}))},computed:{values(){let e=this,t=[];return this.steps.forEach((function(s,a){t.push({label:e.get_label(a),value:e.get_key_from_api(s),color:e.colors[a]})})),t},radar_values(){let e={};return this.values.length>0&&Object.entries(this.values).forEach((function([t,s]){e[s.label]=parseFloat(s.value).toFixed(1)})),e}},methods:{get_label(e){return null!==this.api_data?this.labels[this.version].full[e]:null},get_key_from_api(e){return null!==this.api_data&&this.api_data.hasOwnProperty(e)&&null!==this.api_data[e]?this.api_data[e].toFixed(1):null},retrieve_api:function(){let e=this;if(null!==e.form_id){let t="oecm"===e.version?window.imet_routes.assessment_oecm:window.imet_routes.assessment;fetch(t.replace("__id__",e.form_id),{method:"GET",headers:{"Content-Type":"application/json","X-CSRF-Token":window.Laravel.csrfToken}}).then((e=>e.json())).then((function(t){e.api_data=t}))}}}};s(993);const o=(0,s(1900).Z)(i,a,[],!1,null,"507426d5",null).exports},1022:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"imet_responsible"},[e.to_be_shown.internal.length>0?t("div",[t("b",[e._v(e._s(e.Locale.getLabel("imet-core::common.responsible_internal")))]),e._v(":"),t("br"),e._v(" "),t("ul",e._l(e.to_be_shown.internal,(function(s){return t("li",[e._v(e._s(s.Name)+" "),s.Institution?t("span",[t("i",[e._v("("+e._s(s.Institution)+")")])]):e._e()])})),0)]):e._e(),e._v(" "),e.to_be_shown.external.length>0?t("div",[t("b",[e._v(e._s(e.Locale.getLabel("imet-core::common.responsible_external")))]),e._v(":\n        "),t("ul",e._l(e.to_be_shown.external,(function(s){return t("li",[e._v(e._s(s.Name)+" "),s.Institution?t("span",[t("i",[e._v("("+e._s(s.Institution)+")")])]):e._e()])})),0)]):e._e(),e._v(" "),e.to_be_shown.encoders.length>0?t("div",[t("b",[e._v(e._s(e.Locale.getLabel("imet-core::common.encoders")))]),e._v(":\n        "),t("ul",e._l(e.to_be_shown.encoders,(function(s){return t("li",[e._v(e._s(s.name)+" "),s.institution?t("span",[t("i",[e._v("("+e._s(s.institution)+")")])]):e._e()])})),0)]):e._e(),e._v(" "),e.total_count>e.max_visible&&!e.showHidden?t("button",{staticClass:"btn-nav small",on:{click:e.toggleShown}},[t("i",{staticClass:"fas fa-plus-square"}),e._v(" "+e._s(e.Locale.getLabel("modular-forms::common.view_all")))]):e._e(),e._v(" "),e.showHidden?t("button",{staticClass:"btn-nav small",on:{click:e.toggleShown}},[t("i",{staticClass:"fas fa-minus-square"}),e._v(" "+e._s(e.Locale.getLabel("modular-forms::common.hide")))]):e._e()])};a._withStripped=!0;const i={props:{max_visible:{type:Number,default:4},items:{type:[String,Object],default:()=>({internal:[],external:[],encoders:[]})}},data:function(){return{Locale:window.Locale,showHidden:!1}},computed:{total_count(){return this.items.internal.length+this.items.external.length+this.items.encoders.length},to_be_shown(){let e=this,t={internal:[],external:[],encoders:[]},s=0;return Object.values(this.items.internal).forEach((function(a){(s<e.max_visible||e.showHidden)&&null!==a.Name&&t.internal.push(a),s++})),Object.values(this.items.external).forEach((function(a){(s<e.max_visible||e.showHidden)&&null!==a.Name&&t.external.push(a),s++})),Object.values(this.items.encoders).forEach((function(a){(s<e.max_visible||e.showHidden)&&null!==a.name&&""!==a.name.trim()&&t.encoders.push(a),s++})),t}},methods:{toggleShown(){this.showHidden=!this.showHidden}}};s(7306);const o=(0,s(1900).Z)(i,a,[],!1,null,"6623f777",null).exports},760:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"progress-bar text-2xs"},[e.showLimits&&null!==e.min?t("div",{staticClass:"progress-bar__limit-left"},[e._v(e._s(e.min)+"%")]):e._e(),e._v(" "),t("progress_bar",{attrs:{value:e.value,color:e.color}}),e._v(" "),e.showLimits&&null!==e.max?t("div",{staticClass:"progress-bar__limit-right"},[e._v(e._s(e.max)+"%")]):e._e()],1)};a._withStripped=!0;const i={props:{value:{value:Number,default:0},color:{value:String,default:"#ccc"},showLimits:{value:Boolean,default:!0},min:{value:Number,default:0},max:{value:Number,default:100}}};s(1463);const o=(0,s(1900).Z)(i,a,[],!1,null,"0305b023",null).exports},4278:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=function(){var e=this;return(0,e._self._c)("div",{staticClass:"imet_radar",style:"width:"+e.width+"px; height: "+e.height+"px;"})};a._withStripped=!0;const i={props:{width:{type:Number,default:180},height:{type:Number,default:180},values:{type:Object,default:()=>{}}},computed:{radar_options(){let e=[],t=[];return Object.entries(this.values).reverse().forEach((function([s,a]){e.push(a),t.push({name:s.replace(" ","\n"),max:100})})),{tooltip:{trigger:"axis"},radar:{indicator:t,radius:"65%",startAngle:150,axisName:{color:"#111",padding:[0,0]}},series:[{type:"radar",data:[{value:e,itemStyle:{color:"#7CB5EC"},areaStyle:{color:"#7CB5EC",opacity:.4},symbolSize:6,name:"imet_radar",label:{fontWeight:"bold",color:"#222",show:!0,formatter:function(e){return e.value}}}]}]}}},watch:{values:{deep:!0,handler(){this.draw_chart()}}},mounted(){this.draw_chart()},methods:{draw_chart(){Object.keys(this.values).length>1&&(this.chart=window.ImetCoreVendor.echarts.init(this.$el),this.chart.setOption(this.radar_options))}}};s(33);const o=(0,s(1900).Z)(i,a,[],!1,null,"ec7ae30c",null).exports},1900:(e,t,s)=>{"use strict";function a(e,t,s,a,i,o,r,n){var l,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=s,d._compiled=!0),a&&(d.functional=!0),o&&(d._scopeId="data-v-"+o),r?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},d._ssrRegister=l):i&&(l=n?function(){i.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(d.functional){d._injectStyles=l;var u=d.render;d.render=function(e,t){return l.call(t),u(e,t)}}else{var c=d.beforeCreate;d.beforeCreate=c?[].concat(c,l):[l]}return{exports:e,options:d}}s.d(t,{Z:()=>a})},9182:(e,t,s)=>{var a=s(4484);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(5346).Z)("afe06c80",a,!1,{})},2983:(e,t,s)=>{var a=s(9128);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(5346).Z)("3004e93b",a,!1,{})},567:(e,t,s)=>{var a=s(8150);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(5346).Z)("04e7bb68",a,!1,{})},5513:(e,t,s)=>{var a=s(6833);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(5346).Z)("15ee17be",a,!1,{})},5479:(e,t,s)=>{var a=s(817);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(5346).Z)("53406659",a,!1,{})},3341:(e,t,s)=>{var a=s(6946);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(5346).Z)("438670e5",a,!1,{})},640:(e,t,s)=>{var a=s(1633);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(5346).Z)("af77f9b8",a,!1,{})},993:(e,t,s)=>{var a=s(2848);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(5346).Z)("0026abd0",a,!1,{})},7306:(e,t,s)=>{var a=s(5081);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(5346).Z)("ce6608de",a,!1,{})},1463:(e,t,s)=>{var a=s(7044);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(5346).Z)("680dac1e",a,!1,{})},33:(e,t,s)=>{var a=s(8547);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(5346).Z)("418778f0",a,!1,{})},5346:(e,t,s)=>{"use strict";function a(e,t){for(var s=[],a={},i=0;i<t.length;i++){var o=t[i],r=o[0],n={id:e+":"+i,css:o[1],media:o[2],sourceMap:o[3]};a[r]?a[r].parts.push(n):s.push(a[r]={id:r,parts:[n]})}return s}s.d(t,{Z:()=>_});var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},r=i&&(document.head||document.getElementsByTagName("head")[0]),n=null,l=0,d=!1,u=function(){},c=null,p="data-vue-ssr-id",h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function _(e,t,s,i){d=s,c=i||{};var r=a(e,t);return m(r),function(t){for(var s=[],i=0;i<r.length;i++){var n=r[i];(l=o[n.id]).refs--,s.push(l)}for(t?m(r=a(e,t)):r=[],i=0;i<s.length;i++){var l;if(0===(l=s[i]).refs){for(var d=0;d<l.parts.length;d++)l.parts[d]();delete o[l.id]}}}}function m(e){for(var t=0;t<e.length;t++){var s=e[t],a=o[s.id];if(a){a.refs++;for(var i=0;i<a.parts.length;i++)a.parts[i](s.parts[i]);for(;i<s.parts.length;i++)a.parts.push(v(s.parts[i]));a.parts.length>s.parts.length&&(a.parts.length=s.parts.length)}else{var r=[];for(i=0;i<s.parts.length;i++)r.push(v(s.parts[i]));o[s.id]={id:s.id,refs:1,parts:r}}}}function f(){var e=document.createElement("style");return e.type="text/css",r.appendChild(e),e}function v(e){var t,s,a=document.querySelector("style["+p+'~="'+e.id+'"]');if(a){if(d)return u;a.parentNode.removeChild(a)}if(h){var i=l++;a=n||(n=f()),t=y.bind(null,a,i,!1),s=y.bind(null,a,i,!0)}else a=f(),t=w.bind(null,a),s=function(){a.parentNode.removeChild(a)};return t(e),function(a){if(a){if(a.css===e.css&&a.media===e.media&&a.sourceMap===e.sourceMap)return;t(e=a)}else s()}}var g,b=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function y(e,t,s,a){var i=s?"":a.css;if(e.styleSheet)e.styleSheet.cssText=b(t,i);else{var o=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}function w(e,t){var s=t.css,a=t.media,i=t.sourceMap;if(a&&e.setAttribute("media",a),c.ssrId&&e.setAttribute(p,t.id),i&&(s+="\n/*# sourceURL="+i.sources[0]+" */",s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={id:a,exports:{}};return e[a](o,o.exports,s),o.exports}s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s(2978),s(9182)})();